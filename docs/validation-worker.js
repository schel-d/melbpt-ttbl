!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorMap=exports.setErrorMap=exports.defaultErrorMap=exports.ZodError=exports.quotelessJson=exports.ZodIssueCode=void 0;const parseUtil_1=require("./helpers/parseUtil"),util_1=require("./helpers/util");exports.ZodIssueCode=util_1.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]);exports.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};var r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(e){return e.message},t={_errors:[]},s=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(s);else if("invalid_return_type"===i.code)s(i.returnTypeError);else if("invalid_arguments"===i.code)s(i.argumentsError);else if(0===i.path.length)t._errors.push(r(i));else{let e=t,s=0;for(;s<i.path.length;){const t=i.path[s];s===i.path.length-1?(e[t]=e[t]||{_errors:[]},e[t]._errors.push(r(i))):e[t]=e[t]||{_errors:[]},e=e[t],s++}}};return s(this),t}toString(){return this.message}get message(){return JSON.stringify(this.issues,parseUtil_1.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const r={},t=[];for(const s of this.issues)0<s.path.length?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):t.push(e(s));return{formErrors:t,fieldErrors:r}}get formErrors(){return this.flatten()}}(exports.ZodError=ZodError).create=e=>new ZodError(e);exports.defaultErrorMap=(e,r)=>{let t;switch(e.code){case exports.ZodIssueCode.invalid_type:t=e.received===util_1.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received `+e.received;break;case exports.ZodIssueCode.invalid_literal:t="Invalid literal value, expected "+JSON.stringify(e.expected,parseUtil_1.jsonStringifyReplacer);break;case exports.ZodIssueCode.unrecognized_keys:t="Unrecognized key(s) in object: "+util_1.util.joinValues(e.keys,", ");break;case exports.ZodIssueCode.invalid_union:t="Invalid input";break;case exports.ZodIssueCode.invalid_union_discriminator:t="Invalid discriminator value. Expected "+util_1.util.joinValues(e.options);break;case exports.ZodIssueCode.invalid_enum_value:t=`Invalid enum value. Expected ${util_1.util.joinValues(e.options)}, received '${e.received}'`;break;case exports.ZodIssueCode.invalid_arguments:t="Invalid function arguments";break;case exports.ZodIssueCode.invalid_return_type:t="Invalid function return type";break;case exports.ZodIssueCode.invalid_date:t="Invalid date";break;case exports.ZodIssueCode.invalid_string:"object"==typeof e.validation?"startsWith"in e.validation?t=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?t=`Invalid input: must start with "${e.validation.endsWith}"`:util_1.util.assertNever(e.validation):t="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case exports.ZodIssueCode.too_small:t="array"===e.type?`Array must contain ${e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?"Number must be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case exports.ZodIssueCode.too_big:t="array"===e.type?`Array must contain ${e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?"Number must be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case exports.ZodIssueCode.custom:t="Invalid input";break;case exports.ZodIssueCode.invalid_intersection_types:t="Intersection results could not be merged";break;case exports.ZodIssueCode.not_multiple_of:t="Number must be a multiple of "+e.multipleOf;break;default:t=r.defaultError,util_1.util.assertNever(e)}return{message:t}};let overrideErrorMap=exports.defaultErrorMap;exports.setErrorMap=function(e){overrideErrorMap=e},exports.getErrorMap=function(){return overrideErrorMap}},{"./helpers/parseUtil":4,"./helpers/util":6}],2:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,r,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,o){e[o=void 0===o?t:o]=r[t]}),__exportStar=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||__createBinding(r,e,t)},util_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.ZodParsedType=exports.getParsedType=void 0,__exportStar(require("./helpers/parseUtil"),exports),__exportStar(require("./helpers/typeAliases"),exports),require("./helpers/util"));Object.defineProperty(exports,"getParsedType",{enumerable:!0,get:function(){return util_1.getParsedType}}),Object.defineProperty(exports,"ZodParsedType",{enumerable:!0,get:function(){return util_1.ZodParsedType}}),__exportStar(require("./types"),exports),__exportStar(require("./ZodError"),exports)},{"./ZodError":1,"./helpers/parseUtil":4,"./helpers/typeAliases":5,"./helpers/util":6,"./types":8}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.errorUtil=void 0,(exports=exports.errorUtil||(exports.errorUtil={})).errToObj=r=>"string"==typeof r?{message:r}:r||{},exports.toString=r=>"string"==typeof r?r:null==r?void 0:r.message},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonStringifyReplacer=exports.isAsync=exports.isValid=exports.isDirty=exports.isAborted=exports.OK=exports.DIRTY=exports.INVALID=exports.ParseStatus=exports.addIssueToContext=exports.EMPTY_PATH=exports.makeIssue=void 0;const ZodError_1=require("../ZodError");exports.makeIssue=t=>{const{data:s,path:e,errorMaps:r,issueData:a}=t,o=[...e,...a.path||[]],i={...a,path:o};let u="";var n=r.filter(t=>!!t).slice().reverse();for(const t of n)u=t(i,{data:s,defaultError:u}).message;return{...a,path:o,message:a.message||u}},exports.EMPTY_PATH=[],exports.addIssueToContext=function(t,s){s=exports.makeIssue({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ZodError_1.getErrorMap(),ZodError_1.defaultErrorMap].filter(t=>!!t)}),t.common.issues.push(s)};class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,s){const e=[];for(const r of s){if("aborted"===r.status)return exports.INVALID;"dirty"===r.status&&t.dirty(),e.push(r.value)}return{status:t.value,value:e}}static async mergeObjectAsync(t,s){const e=[];for(const t of s)e.push({key:await t.key,value:await t.value});return ParseStatus.mergeObjectSync(t,e)}static mergeObjectSync(t,s){const e={};for(const r of s){const{key:s,value:a}=r;if("aborted"===s.status)return exports.INVALID;if("aborted"===a.status)return exports.INVALID;"dirty"===s.status&&t.dirty(),"dirty"===a.status&&t.dirty(),void 0===a.value&&!r.alwaysSet||(e[s.value]=a.value)}return{status:t.value,value:e}}}exports.ParseStatus=ParseStatus,exports.INVALID=Object.freeze({status:"aborted"});exports.DIRTY=t=>({status:"dirty",value:t}),exports.OK=t=>({status:"valid",value:t}),exports.isAborted=t=>"aborted"===t.status,exports.isDirty=t=>"dirty"===t.status,exports.isValid=t=>"valid"===t.status,exports.isAsync=t=>t instanceof Promise;exports.jsonStringifyReplacer=(t,s)=>"bigint"==typeof s?s.toString():s},{"../ZodError":1}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],6:[function(require,module,exports){"use strict";var util,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParsedType=exports.ZodParsedType=exports.util=void 0,(e=util=exports.util||(exports.util={})).assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),o={};for(const e of r)o[e]=t[e];return e.objectValues(o)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},exports.ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);exports.getParsedType=e=>{switch(typeof e){case"undefined":return exports.ZodParsedType.undefined;case"string":return exports.ZodParsedType.string;case"number":return isNaN(e)?exports.ZodParsedType.nan:exports.ZodParsedType.number;case"boolean":return exports.ZodParsedType.boolean;case"function":return exports.ZodParsedType.function;case"bigint":return exports.ZodParsedType.bigint;case"object":return Array.isArray(e)?exports.ZodParsedType.array:null===e?exports.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?exports.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?exports.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?exports.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?exports.ZodParsedType.date:exports.ZodParsedType.object;default:return exports.ZodParsedType.unknown}}},{}],7:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){e[o=void 0===o?r:o]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__exportStar=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__importStar=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.z=void 0,__importStar(require("./external")));exports.z=__importStar,__exportStar(require("./external"),exports),exports.default=__importStar},{"./external":2}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersection=exports.instanceof=exports.function=exports.enum=exports.effect=exports.discriminatedUnion=exports.date=exports.boolean=exports.bigint=exports.array=exports.any=exports.ZodFirstPartyTypeKind=exports.late=exports.ZodSchema=exports.Schema=exports.custom=exports.ZodNaN=exports.ZodDefault=exports.ZodNullable=exports.ZodOptional=exports.ZodTransformer=exports.ZodEffects=exports.ZodPromise=exports.ZodNativeEnum=exports.ZodEnum=exports.ZodLiteral=exports.ZodLazy=exports.ZodFunction=exports.ZodSet=exports.ZodMap=exports.ZodRecord=exports.ZodTuple=exports.ZodIntersection=exports.ZodDiscriminatedUnion=exports.ZodUnion=exports.ZodObject=exports.objectUtil=exports.ZodArray=exports.ZodVoid=exports.ZodNever=exports.ZodUnknown=exports.ZodAny=exports.ZodNull=exports.ZodUndefined=exports.ZodDate=exports.ZodBoolean=exports.ZodBigInt=exports.ZodNumber=exports.ZodString=exports.ZodType=void 0,exports.void=exports.unknown=exports.union=exports.undefined=exports.tuple=exports.transformer=exports.string=exports.strictObject=exports.set=exports.record=exports.promise=exports.preprocess=exports.ostring=exports.optional=exports.onumber=exports.oboolean=exports.object=exports.number=exports.nullable=exports.null=exports.never=exports.nativeEnum=exports.nan=exports.map=exports.literal=exports.lazy=void 0;const errorUtil_1=require("./helpers/errorUtil"),parseUtil_1=require("./helpers/parseUtil"),util_1=require("./helpers/util"),ZodError_1=require("./ZodError");class ParseInputLazyPath{constructor(e,t,r,s){this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._path.concat(this._key)}}const handleResult=(e,t)=>{if(parseUtil_1.isValid(t))return{success:!0,data:t.value};if(e.common.issues.length)return{success:!1,error:new ZodError_1.ZodError(e.common.issues)};throw new Error("Validation failed but no issues detected.")};function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw new Error('Can\'t use "invalid" or "required" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,r)=>"invalid_type"!==t.code?{message:r.defaultError}:void 0===r.data&&s?{message:s}:e.invalid_type_error?{message:e.invalid_type_error}:{message:r.defaultError},description:a}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return util_1.getParsedType(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:util_1.getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new parseUtil_1.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:util_1.getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){e=this._parse(e);if(parseUtil_1.isAsync(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(e){e=this._parse(e);return Promise.resolve(e)}parse(e,t){e=this.safeParse(e,t);if(e.success)return e.data;throw e.error}safeParse(e,t){var r={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:util_1.getParsedType(e)},t=this._parseSync({data:e,path:r.path,parent:r});return handleResult(r,t)}async parseAsync(e,t){e=await this.safeParseAsync(e,t);if(e.success)return e.data;throw e.error}async safeParseAsync(e,t){t={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:util_1.getParsedType(e)},e=this._parse({data:e,path:[],parent:t}),e=await(parseUtil_1.isAsync(e)?e:Promise.resolve(e));return handleResult(t,e)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,s)=>{const a=e(t),o=()=>s.addIssue({code:ZodError_1.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(o(),!1)):!!a||(o(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}optional(){return ZodOptional.create(this)}nullable(){return ZodNullable.create(this)}nullish(){return this.optional().nullable()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this)}or(e){return ZodUnion.create([this,e])}and(e){return ZodIntersection.create(this,e)}transform(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ZodDefault({innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:ZodFirstPartyTypeKind.ZodDefault})}describe(e){return new this.constructor({...this._def,description:e})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}exports.ZodType=ZodType,exports.Schema=ZodType,exports.ZodSchema=ZodType;const cuidRegex=/^c[^\s-]{8,}$/i,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement(t=>e.test(t),{validation:t,code:ZodError_1.ZodIssueCode.invalid_string,...errorUtil_1.errorUtil.errToObj(r)}),this.nonempty=e=>this.min(1,errorUtil_1.errorUtil.errToObj(e)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._getType(e)!==util_1.ZodParsedType.string){const t=this._getOrReturnCtx(e);return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.string,received:t.parsedType}),parseUtil_1.INVALID}const t=new parseUtil_1.ParseStatus;let r=void 0;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,message:s.message}),t.dirty());else if("email"===s.kind)emailRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{validation:"email",code:ZodError_1.ZodIssueCode.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)uuidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{validation:"uuid",code:ZodError_1.ZodIssueCode.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)cuidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{validation:"cuid",code:ZodError_1.ZodIssueCode.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(a){r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{validation:"url",code:ZodError_1.ZodIssueCode.invalid_string,message:s.message}),t.dirty()}else"regex"===s.kind?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{validation:"regex",code:ZodError_1.ZodIssueCode.invalid_string,message:s.message}),t.dirty())):"trim"===s.kind?e.data=e.data.trim():"startsWith"===s.kind?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty()):"endsWith"===s.kind?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty()):util_1.util.assertNever(s);return{status:t.value,value:e.data}}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil_1.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil_1.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil_1.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil_1.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...errorUtil_1.errorUtil.errToObj(t)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...errorUtil_1.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...errorUtil_1.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...errorUtil_1.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...errorUtil_1.errorUtil.errToObj(t)})}length(e,t){return this.min(e,t).max(e,t)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}(exports.ZodString=ZodString).create=e=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,...processCreateParams(e)});class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._getType(e)!==util_1.ZodParsedType.number){const t=this._getOrReturnCtx(e);return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.number,received:t.parsedType}),parseUtil_1.INVALID}let t=void 0;const r=new parseUtil_1.ParseStatus;for(const s of this._def.checks)"int"===s.kind?util_1.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,message:s.message}),r.dirty()):"multipleOf"===s.kind?0!==function(e,t){var r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=s<r?r:s;return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):util_1.util.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,errorUtil_1.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil_1.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil_1.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil_1.errorUtil.toString(t))}setLimit(e,t,r,s){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:errorUtil_1.errorUtil.toString(s)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil_1.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil_1.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil_1.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil_1.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil_1.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil_1.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind)}}(exports.ZodNumber=ZodNumber).create=e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,...processCreateParams(e)});class ZodBigInt extends ZodType{_parse(e){var t;return this._getType(e)!==util_1.ZodParsedType.bigint?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.bigint,received:t.parsedType}),parseUtil_1.INVALID):parseUtil_1.OK(e.data)}}(exports.ZodBigInt=ZodBigInt).create=e=>new ZodBigInt({typeName:ZodFirstPartyTypeKind.ZodBigInt,...processCreateParams(e)});class ZodBoolean extends ZodType{_parse(e){var t;return this._getType(e)!==util_1.ZodParsedType.boolean?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.boolean,received:t.parsedType}),parseUtil_1.INVALID):parseUtil_1.OK(e.data)}}(exports.ZodBoolean=ZodBoolean).create=e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,...processCreateParams(e)});class ZodDate extends ZodType{_parse(e){var t;if(this._getType(e)!==util_1.ZodParsedType.date)return t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.date,received:t.parsedType}),parseUtil_1.INVALID;if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_date}),parseUtil_1.INVALID}return{status:"valid",value:new Date(e.data.getTime())}}}(exports.ZodDate=ZodDate).create=e=>new ZodDate({typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(e){var t;return this._getType(e)!==util_1.ZodParsedType.undefined?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.undefined,received:t.parsedType}),parseUtil_1.INVALID):parseUtil_1.OK(e.data)}}(exports.ZodUndefined=ZodUndefined).create=e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(e){var t;return this._getType(e)!==util_1.ZodParsedType.null?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.null,received:t.parsedType}),parseUtil_1.INVALID):parseUtil_1.OK(e.data)}}(exports.ZodNull=ZodNull).create=e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return parseUtil_1.OK(e.data)}}(exports.ZodAny=ZodAny).create=e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return parseUtil_1.OK(e.data)}}(exports.ZodUnknown=ZodUnknown).create=e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(e){e=this._getOrReturnCtx(e);return parseUtil_1.addIssueToContext(e,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.never,received:e.parsedType}),parseUtil_1.INVALID}}(exports.ZodNever=ZodNever).create=e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(e){var t;return this._getType(e)!==util_1.ZodParsedType.undefined?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.void,received:t.parsedType}),parseUtil_1.INVALID):parseUtil_1.OK(e.data)}}(exports.ZodVoid=ZodVoid).create=e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==util_1.ZodParsedType.array)return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.array,received:t.parsedType}),parseUtil_1.INVALID;if(null!==s.minLength&&t.data.length<s.minLength.value&&(parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,message:s.minLength.message}),r.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all(t.data.map((e,r)=>s.type._parseAsync(new ParseInputLazyPath(t,e,t.path,r)))).then(e=>parseUtil_1.ParseStatus.mergeArray(r,e));e=t.data.map((e,r)=>s.type._parseSync(new ParseInputLazyPath(t,e,t.path,r)));return parseUtil_1.ParseStatus.mergeArray(r,e)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil_1.errorUtil.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil_1.errorUtil.toString(t)}})}length(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}var objectUtil;(exports.ZodArray=ZodArray).create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(t)}),(objectUtil=exports.objectUtil||(exports.objectUtil={})).mergeShapes=(e,t)=>({...e,...t});const AugmentFactory=e=>t=>new ZodObject({...e,shape:()=>({...e.shape(),...t})});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=AugmentFactory(this._def),this.extend=AugmentFactory(this._def)}_getCached(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=util_1.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==util_1.ZodParsedType.object){const t=this._getOrReturnCtx(e);return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.object,received:t.parsedType}),parseUtil_1.INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];for(const e in r.data)a.includes(e)||o.push(e);const n=[];for(const e of a){const t=s[e],a=r.data[e];n.push({key:{status:"valid",value:e},value:t._parse(new ParseInputLazyPath(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of o)n.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)0<o.length&&(parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const s=r.data[t];n.push({key:{status:"valid",value:t},value:e._parse(new ParseInputLazyPath(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of n){var r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>parseUtil_1.ParseStatus.mergeObjectSync(t,e)):parseUtil_1.ParseStatus.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(e){return errorUtil_1.errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var a,s=null!=(a=null==(a=(s=this._def).errorMap)?void 0:a.call(s,t,r).message)?a:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(a=errorUtil_1.errorUtil.errToObj(e).message)?a:s}:{message:s}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}setKey(e,t){return this.augment({[e]:t})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>objectUtil.mergeShapes(this._def.shape(),e._def.shape()),typeName:ZodFirstPartyTypeKind.ZodObject})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};return util_1.util.objectKeys(e).map(e=>{this.shape[e]&&(t[e]=this.shape[e])}),new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};return util_1.util.objectKeys(this.shape).map(r=>{-1===util_1.util.objectKeys(e).indexOf(r)&&(t[r]=this.shape[r])}),new ZodObject({...this._def,shape:()=>t})}deepPartial(){return function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const r in e.shape){var s=e.shape[r];t[r]=ZodOptional.create(deepPartialify(s))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?ZodArray.create(deepPartialify(e.element)):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(e=>deepPartialify(e))):e}(this)}partial(e){const t={};if(e)return util_1.util.objectKeys(this.shape).map(r=>{-1===util_1.util.objectKeys(e).indexOf(r)?t[r]=this.shape[r]:t[r]=this.shape[r].optional()}),new ZodObject({...this._def,shape:()=>t});for(const e in this.shape){const r=this.shape[e];t[e]=r.optional()}return new ZodObject({...this._def,shape:()=>t})}required(){const e={};for(const t in this.shape){let r=this.shape[t];for(;r instanceof ZodOptional;)r=r._def.innerType;e[t]=r}return new ZodObject({...this._def,shape:()=>e})}}(exports.ZodObject=ZodObject).create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(e){const t=this._processInputParams(e)["ctx"],r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{var r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map(e=>new ZodError_1.ZodError(e.ctx.common.issues));return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_union,unionErrors:r}),parseUtil_1.INVALID});{let e=void 0;const s=[];for(const a of r){const r={...t,common:{...t.common,issues:[]},parent:null},o=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&s.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;var a=s.map(e=>new ZodError_1.ZodError(e));return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_union,unionErrors:a}),parseUtil_1.INVALID}}get options(){return this._def.options}}(exports.ZodUnion=ZodUnion).create=(e,t)=>new ZodUnion({options:e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(t)});class ZodDiscriminatedUnion extends ZodType{_parse(e){e=this._processInputParams(e).ctx;if(e.parsedType!==util_1.ZodParsedType.object)return parseUtil_1.addIssueToContext(e,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.object,received:e.parsedType}),parseUtil_1.INVALID;const r=this.discriminator,s=e.data[r],a=this.options.get(s);return a?e.common.async?a._parseAsync({data:e.data,path:e.path,parent:e}):a._parseSync({data:e.data,path:e.path,parent:e}):(parseUtil_1.addIssueToContext(e,{code:ZodError_1.ZodIssueCode.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),parseUtil_1.INVALID)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(e,t,r){const s=new Map;try{t.forEach(t=>{var r=t.shape[e].value;s.set(r,t)})}catch(e){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(s.size!==t.length)throw new Error("Some of the discriminator values are not unique");return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:s,...processCreateParams(r)})}}exports.ZodDiscriminatedUnion=ZodDiscriminatedUnion;class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(e,s)=>{if(parseUtil_1.isAborted(e)||parseUtil_1.isAborted(s))return parseUtil_1.INVALID;var a=function mergeValues(e,t){const r=util_1.getParsedType(e),s=util_1.getParsedType(t);if(e===t)return{valid:!0,data:e};if(r===util_1.ZodParsedType.object&&s===util_1.ZodParsedType.object){const r=util_1.util.objectKeys(t),s=util_1.util.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const r of s){const s=mergeValues(e[r],t[r]);if(!s.valid)return{valid:!1};a[r]=s.data}return{valid:!0,data:a}}if(r!==util_1.ZodParsedType.array||s!==util_1.ZodParsedType.array)return r===util_1.ZodParsedType.date&&s===util_1.ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1};{if(e.length!==t.length)return{valid:!1};const r=[];for(let s=0;s<e.length;s++){var a=mergeValues(e[s],t[s]);if(!a.valid)return{valid:!1};r.push(a.data)}return{valid:!0,data:r}}}(e.value,s.value);return a.valid?((parseUtil_1.isDirty(e)||parseUtil_1.isDirty(s))&&t.dirty(),{status:t.value,value:a.data}):(parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_intersection_types}),parseUtil_1.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}(exports.ZodIntersection=ZodIntersection).create=(e,t,r)=>new ZodIntersection({left:e,right:t,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==util_1.ZodParsedType.array)return parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.array,received:r.parsedType}),parseUtil_1.INVALID;if(r.data.length<this._def.items.length)return parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),parseUtil_1.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&(parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),t.dirty());e=r.data.map((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new ParseInputLazyPath(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(e).then(e=>parseUtil_1.ParseStatus.mergeArray(t,e)):parseUtil_1.ParseStatus.mergeArray(t,e)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}(exports.ZodTuple=ZodTuple).create=(e,t)=>new ZodTuple({items:e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(t)});class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){var{status:e,ctx:r}=this._processInputParams(e);if(r.parsedType!==util_1.ZodParsedType.object)return parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.object,received:r.parsedType}),parseUtil_1.INVALID;const s=[],a=this._def.keyType,o=this._def.valueType;for(const e in r.data)s.push({key:a._parse(new ParseInputLazyPath(r,e,r.path,e)),value:o._parse(new ParseInputLazyPath(r,r.data[e],r.path,e))});return r.common.async?parseUtil_1.ParseStatus.mergeObjectAsync(e,s):parseUtil_1.ParseStatus.mergeObjectSync(e,s)}get element(){return this._def.valueType}static create(e,t,r){return new ZodRecord(t instanceof ZodType?{keyType:e,valueType:t,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r)}:{keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(t)})}}exports.ZodRecord=ZodRecord;class ZodMap extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==util_1.ZodParsedType.map)return parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.map,received:r.parsedType}),parseUtil_1.INVALID;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([e,t],o)=>({key:s._parse(new ParseInputLazyPath(r,e,r.path,[o,"key"])),value:a._parse(new ParseInputLazyPath(r,t,r.path,[o,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of o){var s=await r.key,a=await r.value;if("aborted"===s.status||"aborted"===a.status)return parseUtil_1.INVALID;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of o){const s=r.key,a=r.value;if("aborted"===s.status||"aborted"===a.status)return parseUtil_1.INVALID;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}(exports.ZodMap=ZodMap).create=(e,t,r)=>new ZodMap({valueType:t,keyType:e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==util_1.ZodParsedType.set)return parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.set,received:r.parsedType}),parseUtil_1.INVALID;e=this._def;null!==e.minSize&&r.data.size<e.minSize.value&&(parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.too_small,minimum:e.minSize.value,type:"set",inclusive:!0,message:e.minSize.message}),t.dirty()),null!==e.maxSize&&r.data.size>e.maxSize.value&&(parseUtil_1.addIssueToContext(r,{code:ZodError_1.ZodIssueCode.too_big,maximum:e.maxSize.value,type:"set",inclusive:!0,message:e.maxSize.message}),t.dirty());const a=this._def.valueType;function o(e){const r=new Set;for(const s of e){if("aborted"===s.status)return parseUtil_1.INVALID;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}e=[...r.data.values()].map((e,t)=>a._parse(new ParseInputLazyPath(r,e,r.path,t)));return r.common.async?Promise.all(e).then(e=>o(e)):o(e)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil_1.errorUtil.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil_1.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}(exports.ZodSet=ZodSet).create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const t=this._processInputParams(e)["ctx"];if(t.parsedType!==util_1.ZodParsedType.function)return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.function,received:t.parsedType}),parseUtil_1.INVALID;function r(e,r){return parseUtil_1.makeIssue({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ZodError_1.getErrorMap(),ZodError_1.defaultErrorMap].filter(e=>!!e),issueData:{code:ZodError_1.ZodIssueCode.invalid_arguments,argumentsError:r}})}function s(e,r){return parseUtil_1.makeIssue({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ZodError_1.getErrorMap(),ZodError_1.defaultErrorMap].filter(e=>!!e),issueData:{code:ZodError_1.ZodIssueCode.invalid_return_type,returnTypeError:r}})}const a={errorMap:t.common.contextualErrorMap},o=t.data;return this._def.returns instanceof ZodPromise?parseUtil_1.OK(async(...e)=>{const t=new ZodError_1.ZodError([]),n=await this._def.args.parseAsync(e,a).catch(s=>{throw t.addIssue(r(e,s)),t}),i=await o(...n);return this._def.returns._def.type.parseAsync(i,a).catch(e=>{throw t.addIssue(s(i,e)),t})}):parseUtil_1.OK((...e)=>{var t=this._def.args.safeParse(e,a);if(!t.success)throw new ZodError_1.ZodError([r(e,t.error)]);e=o(...t.data),t=this._def.returns.safeParse(e,a);if(t.success)return t.data;throw new ZodError_1.ZodError([s(e,t.error)])})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}}(exports.ZodFunction=ZodFunction).create=(e,t,r)=>new ZodFunction({args:(e||ZodTuple.create([])).rest(ZodUnknown.create()),returns:t||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(r)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){e=this._processInputParams(e).ctx;return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}(exports.ZodLazy=ZodLazy).create=(e,t)=>new ZodLazy({getter:e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(e){var t;return e.data!==this._def.value?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_literal,expected:this._def.value}),parseUtil_1.INVALID):{status:"valid",value:e.data}}get value(){return this._def.value}}(exports.ZodLiteral=ZodLiteral).create=(e,t)=>new ZodLiteral({value:e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(t)});class ZodEnum extends ZodType{_parse(e){var t,r;if("string"!=typeof e.data)return t=this._getOrReturnCtx(e),r=this._def.values,parseUtil_1.addIssueToContext(t,{expected:util_1.util.joinValues(r),received:t.parsedType,code:ZodError_1.ZodIssueCode.invalid_type}),parseUtil_1.INVALID;if(-1!==this._def.values.indexOf(e.data))return parseUtil_1.OK(e.data);{const t=this._getOrReturnCtx(e),r=this._def.values;return parseUtil_1.addIssueToContext(t,{received:t.data,code:ZodError_1.ZodIssueCode.invalid_enum_value,options:r}),parseUtil_1.INVALID}}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}}(exports.ZodEnum=ZodEnum).create=function(e,t){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})};class ZodNativeEnum extends ZodType{_parse(e){const t=util_1.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==util_1.ZodParsedType.string&&r.parsedType!==util_1.ZodParsedType.number){const e=util_1.util.objectValues(t);return parseUtil_1.addIssueToContext(r,{expected:util_1.util.joinValues(e),received:r.parsedType,code:ZodError_1.ZodIssueCode.invalid_type}),parseUtil_1.INVALID}if(-1!==t.indexOf(e.data))return parseUtil_1.OK(e.data);{const e=util_1.util.objectValues(t);return parseUtil_1.addIssueToContext(r,{received:r.data,code:ZodError_1.ZodIssueCode.invalid_enum_value,options:e}),parseUtil_1.INVALID}}get enum(){return this._def.values}}(exports.ZodNativeEnum=ZodNativeEnum).create=(e,t)=>new ZodNativeEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{_parse(e){const t=this._processInputParams(e)["ctx"];if(t.parsedType!==util_1.ZodParsedType.promise&&!1===t.common.async)return parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.promise,received:t.parsedType}),parseUtil_1.INVALID;const r=t.parsedType===util_1.ZodParsedType.promise?t.data:Promise.resolve(t.data);return parseUtil_1.OK(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}(exports.ZodPromise=ZodPromise).create=(e,t)=>new ZodPromise({type:e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null;if("preprocess"===s.type){const e=s.transform(r.data);return r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}const a={addIssue:e=>{parseUtil_1.addIssueToContext(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"refinement"===s.type){const e=e=>{var t=s.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?parseUtil_1.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?parseUtil_1.INVALID:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}}if("transform"===s.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>parseUtil_1.isValid(e)?Promise.resolve(s.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!parseUtil_1.isValid(e))return e;var o=s.transform(e.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}}util_1.util.assertNever(s)}}exports.ZodEffects=ZodEffects,(exports.ZodTransformer=ZodEffects).create=(e,t,r)=>new ZodEffects({schema:e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:t,...processCreateParams(r)}),ZodEffects.createWithPreprocess=(e,t,r)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===util_1.ZodParsedType.undefined?parseUtil_1.OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}(exports.ZodOptional=ZodOptional).create=(e,t)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===util_1.ZodParsedType.null?parseUtil_1.OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}(exports.ZodNullable=ZodNullable).create=(e,t)=>new ZodNullable({innerType:e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(e){e=this._processInputParams(e).ctx;let r=e.data;return e.parsedType===util_1.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}(exports.ZodDefault=ZodDefault).create=(e,t)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(e){var t;return this._getType(e)!==util_1.ZodParsedType.nan?(t=this._getOrReturnCtx(e),parseUtil_1.addIssueToContext(t,{code:ZodError_1.ZodIssueCode.invalid_type,expected:util_1.ZodParsedType.nan,received:t.parsedType}),parseUtil_1.INVALID):{status:"valid",value:e.data}}}(exports.ZodNaN=ZodNaN).create=e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e)});var ZodFirstPartyTypeKind;exports.custom=(e,t={},r)=>e?ZodAny.create().superRefine((s,a)=>{if(!e(s)){const e="function"==typeof t?t(s):t,o="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...o,fatal:r})}}):ZodAny.create(),exports.late={object:ZodObject.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(ZodFirstPartyTypeKind=exports.ZodFirstPartyTypeKind||(exports.ZodFirstPartyTypeKind={}));exports.instanceof=(e,t={message:"Input not instance of "+e.name})=>exports.custom(t=>t instanceof e,t,!0);const stringType=ZodString.create,numberType=(exports.string=stringType,ZodNumber.create);exports.number=numberType;require=ZodNaN.create,exports.nan=require,require=ZodBigInt.create;exports.bigint=require;const booleanType=ZodBoolean.create;exports.boolean=booleanType;require=ZodDate.create,exports.date=require,require=ZodUndefined.create,exports.undefined=require,require=ZodNull.create,exports.null=require,require=ZodAny.create,exports.any=require,require=ZodUnknown.create,exports.unknown=require,require=ZodNever.create,exports.never=require,require=ZodVoid.create,exports.void=require,require=ZodArray.create,exports.array=require,require=ZodObject.create,exports.object=require,require=ZodObject.strictCreate,exports.strictObject=require,require=ZodUnion.create,exports.union=require,require=ZodDiscriminatedUnion.create,exports.discriminatedUnion=require,require=ZodIntersection.create,exports.intersection=require,require=ZodTuple.create,exports.tuple=require,require=ZodRecord.create,exports.record=require,require=ZodMap.create,exports.map=require,require=ZodSet.create,exports.set=require,require=ZodFunction.create,exports.function=require,require=ZodLazy.create,exports.lazy=require,require=ZodLiteral.create,exports.literal=require,require=ZodEnum.create,exports.enum=require,require=ZodNativeEnum.create,exports.nativeEnum=require,require=ZodPromise.create,exports.promise=require,require=ZodEffects.create,exports.effect=require,exports.transformer=require,require=ZodOptional.create,exports.optional=require,require=ZodNullable.create,exports.nullable=require,require=ZodEffects.createWithPreprocess;exports.preprocess=require,exports.ostring=()=>stringType().optional(),exports.onumber=()=>numberType().optional();exports.oboolean=()=>booleanType().optional()},{"./ZodError":1,"./helpers/errorUtil":3,"./helpers/parseUtil":4,"./helpers/util":6}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadNetwork=exports.Network=void 0;const zod_1=require("zod"),Stop=zod_1.z.object({id:zod_1.z.number(),name:zod_1.z.string(),platforms:zod_1.z.object({id:zod_1.z.string(),name:zod_1.z.string()}).array(),urlName:zod_1.z.string()}),Line=zod_1.z.object({id:zod_1.z.number(),name:zod_1.z.string(),color:zod_1.z.enum(["red","yellow","green","cyan","blue","purple","pink","grey"]),service:zod_1.z.enum(["suburban","regional"]),routeType:zod_1.z.enum(["linear","city-loop","branch"]),routeLoopPortal:zod_1.z.enum(["richmond","jolimont","north-melbourne"]).optional(),directions:zod_1.z.object({id:zod_1.z.string(),name:zod_1.z.string(),stops:zod_1.z.number().array()}).array()}),NetworkJson=zod_1.z.object({hash:zod_1.z.string(),stops:Stop.array(),lines:Line.array()});class Network{constructor(o){this._json=o}get lines(){if(null==this._json)throw new Error("Network not loaded.");return this._json.lines}stopName(o){if(null==this._json)throw new Error("Network not loaded.");var r=this._json.stops.find(r=>r.id===o);if(null==r)throw new Error("No stop with id="+o);return r.name}line(o){var r=this._json.lines.find(r=>r.id==o);if(null==r)throw new Error(`No train line with the ID "${o}"`);return r}directionsForLine(o){return this.line(o).directions}toJSON(){return this._json}static fromJSON(o){o=NetworkJson.parse(o);return new Network(o)}}exports.Network=Network,exports.loadNetwork=async function(o){const r=await fetch(`https://${o}/network/v1`);if(200!=r.status)throw new Error(`"${o}" did not respond.`);var t=await r.json();try{const o=NetworkJson.parse(t);return new Network(o)}catch(o){throw new Error("The API responded in an unexpected format")}}},{zod:7}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimetableDataJson=exports.Service=exports.TimetableData=void 0;const zod_1=require("zod");exports.TimetableData=class TimetableData{constructor(e=[]){this._services=e.map(e=>e.clone())}cell(e,s){return this._services[e].times[s]}service(e){return this._services[e].clone()}nextDay(e){return this._services[e].nextDay}map(e){return this._services.map((s,t)=>e(s.clone(),t))}filter(e){return this._services.map(e=>e.clone()).filter((s,t)=>e(s,t))}addServices(e,s){null==s?this._services.push(...e.map(e=>e.clone())):this._services.splice(s,0,...e.map(e=>e.clone()))}deleteServices(e,s){null==s?this._services.splice(e,1):this._services.splice(e,s-e)}replaceService(e,s){this._services[s]=e.clone()}replaceCell(e,s,t){this._services[e].times[s]=t}modifyCell(e,s,t){this._services[e].times[s]=t(this._services[e].times[s])}modifyCells(e,s,t,i,r){for(let c=Math.min(e,t);c<=Math.max(e,t);c++)for(let e=Math.min(s,i);e<=Math.max(s,i);e++)this._services[c].times[e]=r(this._services[c].times[e],c,e)}setNextDay(e,s){this._services[e].nextDay=s}clone(){return new TimetableData(this._services)}get width(){return this._services.length}toJSON(){return{services:this._services.map(e=>e.toJSON())}}static fromJSON(e){const s=exports.TimetableDataJson.parse(e);return new TimetableData(s.services.map(e=>Service.fromJSON(e)))}};class Service{constructor(e,s){this.times=e,this.nextDay=s}clone(){return new Service([...this.times],this.nextDay)}toJSON(){return{times:this.times,nextDay:this.nextDay}}static fromJSON(e){e=ServiceJson.parse(e);return new Service(e.times,e.nextDay)}}exports.Service=Service;const ServiceJson=zod_1.z.object({times:zod_1.z.string().array(),nextDay:zod_1.z.boolean()});exports.TimetableDataJson=zod_1.z.object({services:ServiceJson.array()})},{zod:7}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimetableSection=void 0;const week_day_range_1=require("./week-day-range"),timetable_data_1=require("./timetable-data"),zod_1=require("zod");exports.TimetableSection=class TimetableSection{constructor(t,e,a){this.generalDir=t,this.wdr=(0,week_day_range_1.validateWDR)(e),this.stops=a,this._data=new timetable_data_1.TimetableData,this.undoFrames=[],this.redoFrames=[],this.changed=null}edit(t,e){for(this.undoFrames.push({actionName:t,before:this._data});10<this.undoFrames.length;)this.undoFrames.shift();this.redoFrames=[],t=this._data.clone(),e(t),this._data=t,this.changed&&this.changed()}undo(){var t=this.undoFrames.pop();return null==t?null:(this.redoFrames.push({actionName:t.actionName,after:this._data}),this._data=t.before,this.changed&&this.changed(),t.actionName)}redo(){var t=this.redoFrames.pop();return null==t?null:(this.undoFrames.push({actionName:t.actionName,before:this._data}),this._data=t.after,this.changed&&this.changed(),t.actionName)}cell(t,e){return this._data.cell(t,e)}service(t){return this._data.service(t)}nextDay(t){return this._data.nextDay(t)}map(t){return this._data.map(t)}filter(t){return this._data.filter(t)}toJSON(){return{generalDir:this.generalDir,wdr:this.wdr,stops:this.stops,data:this._data.toJSON()}}static fromJSON(t){const e=TimetableSectionJson.parse(t),a=new TimetableSection(e.generalDir,e.wdr,e.stops);return a._data=timetable_data_1.TimetableData.fromJSON(e.data),a}get width(){return this._data.width}get height(){return this.stops.length}};const TimetableSectionJson=zod_1.z.object({generalDir:zod_1.z.string(),wdr:zod_1.z.string(),stops:zod_1.z.number().array(),data:timetable_data_1.TimetableDataJson})},{"./timetable-data":10,"./week-day-range":13,zod:7}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValidationResultsJson=exports.ValidationResults=exports.validateSection=exports.validateTimetable=void 0;const zod_1=require("zod"),utils_1=require("../utils");function validateSection(e,r,t){var s=new ValidationResults(e.width,e.height);return function(e,r){for(const t of(0,utils_1.range)(0,e.height))(0,utils_1.range)(0,e.width).some(r=>""==e.cell(r,t))&&r.reportStopError(t,"Stop has missing values")}(e,s),function(e,r){for(const t of(0,utils_1.range)(0,e.width)){const s=e.service(t);for(const i of(0,utils_1.range)(0,t)){const o=e.service(i);s.nextDay==o.nextDay&&s.times.every((e,r)=>e==o.times[r])&&r.reportServiceError(t,"Duplicated service")}}}(e,s),function(e,r,t,s){var i=r.line(t);for(const r of(0,utils_1.range)(0,e.width)){const t=e.service(r),o=/^((2[0-3]|[01][0-9]):[0-5][0-9]|-)$/;if(t.times.every(e=>""==e||o.test(e))){if(!t.times.some(e=>""==e)){const o=function(e,r,t){const s=e.filter((e,t)=>"-"!=r.times[t]);if(s.length<2)return null;const i=t.filter(e=>e.stops.filter(e=>s.includes(e)).every((e,r)=>s[r]===e));return 0==i.length?null:i.sort((e,r)=>e.stops.length-r.stops.length)[0].id}(e.stops,t,i.directions);if(null==o)s.reportServiceError(r,"Service direction unrecognized");else{s.reportServiceDirection(r,o,function(e,r){return"city-loop"===r.routeType?e.endsWith("-via-loop")?r.routeLoopPortal+"-via-loop":r.routeLoopPortal+"-direct":"branch"===r.routeType&&2==r.directions.length?e===r.directions[0].id?"branch-a":"branch-b":null}(o,i));const e=function(e){const r=[];let t=0;for(let s=0;s<e.times.length;s++){var i;"-"===e.times[s]?r.push(t):(i=(0,utils_1.parseMinuteOfDay)(e.times[s]),r.push(i),t=i)}const s=[];for(let e=1;e<r.length;e++)r[e-1]>r[e]&&s.push(e);return e.nextDay&&0===s.length?0:e.nextDay||0!==s.length?e.nextDay||1!==s.length?null:s[0]:r.length}(t);null==e?s.reportServiceError(r,"Time travel required (service spans too many days)"):s.reportNextDayThreshold(r,e)}}}else s.reportServiceError(r,"Cells contain invalid values")}}(e,r,t,s),s}exports.validateTimetable=function(e,r){return e.sections.map(t=>validateSection(t,r,e.lineID))},exports.validateSection=validateSection;class ValidationResults{constructor(e,r){this.stopErrors=(0,utils_1.repeat)(null,r),this.serviceErrors=(0,utils_1.repeat)(null,e),this.nextDayThresholds=(0,utils_1.repeat)(null,e),this.directions=(0,utils_1.repeat)(null,e),this.directionsIcons=(0,utils_1.repeat)(null,e)}reportStopError(e,r){this.stopErrors[e]=r}reportServiceError(e,r){this.serviceErrors[e]=r}reportServiceDirection(e,r,t){this.directions[e]=r,this.directionsIcons[e]=t}reportNextDayThreshold(e,r){this.nextDayThresholds[e]=r}isValid(){return this.stopErrors.every(e=>null==e)&&this.serviceErrors.every(e=>null==e)&&this.directions.every(e=>null!=e)}overallError(){let t=null;if(null==(t=null==(t=null==t?null!=(e=this.stopErrors.find(e=>null!=e))?e:null:t)?null!=(e=this.serviceErrors.find(e=>null!=e))?e:null:t))return null;var e=this.stopErrors.filter(e=>null!=e).length+this.serviceErrors.filter(e=>null!=e).length-1;return 0==e?t:1==e?t+" + 1 other error":t+` + ${e} other errors`}toJSON(){return{stopErrors:this.stopErrors,serviceErrors:this.serviceErrors,nextDayThresholds:this.nextDayThresholds,directionsIcons:this.directionsIcons}}static fromJSON(e){const r=exports.ValidationResultsJson.parse(e),t=r.serviceErrors.length,s=r.stopErrors.length,i=new ValidationResults(t,s);return i.stopErrors=r.stopErrors,i.serviceErrors=r.serviceErrors,i.nextDayThresholds=r.nextDayThresholds,i.directionsIcons=r.directionsIcons,i}}exports.ValidationResults=ValidationResults,exports.ValidationResultsJson=zod_1.z.object({stopErrors:zod_1.z.string().nullable().array(),serviceErrors:zod_1.z.string().nullable().array(),nextDayThresholds:zod_1.z.number().nullable().array(),directionsIcons:zod_1.z.string().nullable().array()})},{"../utils":14,zod:7}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateWDR=exports.nameWDR=exports.WDRPresets=void 0,exports.WDRPresets=[["MTWT___","____F__","_____S_","______S"],["MTWTF__","_____S_","______S"],["MTWTFSS"],["M______","_TWT___","____F__","_____S_","______S"],["M______","_TWTF__","_____S_","______S"],["M______","_T_____","__W____","___T___","____F__","_____S_","______S"]];const WDRNames={M______:"Mon",_T_____:"Tue",__W____:"Wed",___T___:"Thu",____F__:"Fri",_____S_:"Sat",______S:"Sun",MTWT___:"Mon-Thu",MTWTF__:"Mon-Fri",MTWTFSS:"Mon-Sun",_TWT___:"Tue-Thu",_TWTF__:"Tue-Fri"};exports.nameWDR=function(_){if(_ in WDRNames)return WDRNames[_];throw new Error(`Week day range value "${_}" is invalid or not supported`)},exports.validateWDR=function(_){if(/^(M|_)(T|_)(W|_)(T|_)(F|_)(S|_)(S|_)$/.test(_))return _;throw new Error(`Invalid week day range value: "${_}"`)}},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorMessage=exports.standardizeTimeString=exports.parseMinuteOfDay=exports.repeat=exports.range=exports.clamp=exports.validateLineID=exports.validateTimetableID=void 0,exports.validateTimetableID=function(e){if(isNaN(e))throw new Error("No timetable ID given");if(1295<e||e<0)throw new Error("Timetable ID must be 0-1295 to fit within two base-36 "+`digits (given ${e})`);return e},exports.validateLineID=function(e,t){if(t.lines.some(t=>t.id===e))return e;throw new Error("There is no line with id="+e)},exports.clamp=function(e,t,r){var a=Math.min(t,r),t=Math.max(t,r);return Math.min(Math.max(e,a),t)},exports.range=function(e,t){return[...Array(t-e).keys()].map(t=>t+e)},exports.repeat=function(e,t){const r=[];for(let a=0;a<t;a++)r.push(e);return r},exports.parseMinuteOfDay=function(e){var t=e.split(":"),r=parseInt(t[0]),t=parseInt(t[1]);if(isNaN(r)||isNaN(t)||r<0||t<0||23<r||59<t)throw new Error(`"${e}" is not a valid time of day`);return 60*r+t},exports.standardizeTimeString=function(e){if(!/^[0-9]{1,2}:[0-9]{2}(am|pm)?$/g.test(e))return null;const t=e.split(":");let r=parseInt(t[0]);const a=parseInt(t[1].replace("am","").replace("pm",""));return(e.endsWith("am")||e.endsWith("pm"))&&(r%=12,e.endsWith("pm")&&(r+=12)),r<0||24<=r||a<0||60<=a?null:r.toFixed().padStart(2,"0")+":"+a.toFixed().padStart(2,"0")},exports.getErrorMessage=function(e){return e instanceof Error?e.message:"Something went wrong"}},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const zod_1=require("zod"),network_1=require("./data/network"),timetable_section_1=require("./data/timetable-section"),timetable_validation_1=require("./data/timetable-validation");let network=null;onmessage=e=>{if(e.data.network)network=network_1.Network.fromJSON(e.data.network);else if(null==network)console.error("Cannot validate the timetable. The network object has not yet been provided to the validation worker.");else{const t=timetable_section_1.TimetableSection.fromJSON(e.data.section),o=zod_1.z.number().parse(e.data.lineID),a=(0,timetable_validation_1.validateSection)(t,network,o);postMessage(a.toJSON())}}},{"./data/network":9,"./data/timetable-section":11,"./data/timetable-validation":12,zod:7}]},{},[15]);
